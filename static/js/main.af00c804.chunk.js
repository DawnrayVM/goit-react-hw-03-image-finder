(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{6:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1WTPO",SearchForm:"Searchbar_SearchForm__350Vb",SearchFormButton:"Searchbar_SearchFormButton__1QMXz",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__2vNgl",SearchFormInput:"Searchbar_SearchFormInput__30xhK"}},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(25),i=a.n(c),s=a(26),l=a(12),u=a(7),g=a(8),m=a(11),d=a(10),b=a(14),p=a(16),h=a.n(p),f=a(27),x=a.n(f),j="https://pixabay.com/api/",v=12,y="20341451-3d1090cbc297b1fd4b3b8fcd1",O=function(e,t){var a=j,n=v,r=y;return x.a.get("".concat(a,"?q=").concat(e,"&page=").concat(t,"&key=").concat(r,"&image_type=photo&orientation=horizontal&per_page=").concat(n)).then((function(e){return e.data.hits}))},S=a(6),I=a(1),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:""},e.inputHandler=function(t){e.setState({inputValue:t.target.value})},e.submitForm=function(t){t.preventDefault(),e.props.onSubmit(e.state.inputValue)},e}return Object(g.a)(a,[{key:"render",value:function(){return Object(I.jsx)("header",{className:S.Searchbar,children:Object(I.jsxs)("form",{className:S.SearchForm,onSubmit:this.submitForm,children:[Object(I.jsx)("button",{type:"submit",className:S.SearchFormButton,children:Object(I.jsx)("span",{className:S.SearchFormButtonLabel})}),Object(I.jsx)("input",{name:"input",className:S.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.inputHandler})]})})}}]),a}(r.Component),k=a(4),C=Object(k.a)({container:{display:"block",textAlign:"center"},button:{padding:"8px 16px",borderRadius:2,backgroundColor:"#3f51b5",transition:"all 250ms cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"center",display:"inline-block",color:"#fff",border:0,textDecoration:"none",cursor:"pointer",fontFamily:"inherit",fontSize:18,fontStyle:"normal",fontWeight:500,minWidth:180,boxShadow:"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)","&:hover":{backgroundColor:"#303f9f"},"&:focus":{backgroundColor:"#303f9f"}}}),F=function(e){var t=e.label,a=void 0===t?"Load more":t,n=e.onClick,r=C();return Object(I.jsx)("div",{className:r.container,children:Object(I.jsx)("button",{type:"button",className:r.button,onClick:n,children:a})})},_=Object(k.a)({imageGalleryItem:{borderRadius:2,boxShadow:"0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12)"},imageGalleryItemImage:{width:"100%",height:260,objectFit:"cover",transition:"transform 250ms cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.03)",cursor:"zoom-in"}}}),L=function(e){var t=e.images,a=e.getImageIdx,n=_();return t.map((function(e){var t=e.id,r=e.webformatURL,o=e.largeImageURL,c=e.tags;return Object(I.jsx)("li",{className:n.imageGalleryItem,children:Object(I.jsx)("img",{src:r,alt:c,"data-src":o,className:n.imageGalleryItemImage,onClick:a})},t)}))},N=Object(k.a)({imageGallery:{display:"grid",maxWidth:"calc(100vw - 48px)",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gridGap:15,margin:{top:0,bottom:0,left:"auto",right:"auto"},padding:0,listStyle:"none"}}),T=function(e){var t=e.images,a=e.children,n=e.getImageIdx,r=N();return t.length>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("ul",{className:r.imageGallery,children:Object(I.jsx)(L,{images:t,getImageIdx:n})}),a]})},R=Object(k.a)({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1200,padding:{top:50,bottom:50}},modal:{maxWidth:1280,maxHeight:"auto",overflow:"hidden"}}),U=function(e){var t=e.activeimage,a=e.onClick,n=e.onKeydown,o=R(),c=function(e){"Escape"===e.code&&n()};return Object(r.useEffect)((function(){window.addEventListener("keydown",c)}),[]),Object(r.useEffect)((function(){return function(){window.removeEventListener("keydown",c)}}),[]),Object(I.jsx)("div",{className:o.overlay,onClick:a,children:Object(I.jsx)("div",{className:o.modal,children:Object(I.jsx)("img",{src:t,alt:"Photo from Pixabay"})})})},Q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],searchQuery:"",page:1,activeImage:"",activeModal:!1,loading:!1,scrollValue:0},e.setDefaultState=function(){e.setState({images:[],searchQuery:"",page:1,activeImage:"",activeModal:!1,loading:!1,scrollValue:0})},e.findImages=function(){e.state.searchQuery&&O(e.state.searchQuery,e.state.page).then((function(t){var a=t.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}));e.setState({images:Object(l.a)(a),page:e.state.page+1}),e.spinnerToggle()})).catch(console.log).finally(e.spinnerToggle())},e.getMoreImages=function(){var t=e.state,a=t.searchQuery,n=t.page;O(a,n).then((function(t){var a=t.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}));e.setState((function(e){return{images:[].concat(Object(l.a)(e.images),Object(l.a)(a)),page:n+1}})),e.spinnerToggle()})).catch(console.log).finally(e.spinnerToggle())},e.submitHandler=function(t){e.state.searchQuery!==t&&(e.setDefaultState(),e.setState({searchQuery:t}))},e.spinnerToggle=function(){e.setState((function(e){return{loading:!e.loading}}))},e.modalToggle=function(){e.setState((function(e){return{activeModal:!e.activeModal}}))},e.activeImageHandler=function(t){e.setState({activeImage:t.target.dataset.src}),e.modalToggle()},e.modalCloseHandler=function(t){t.target===t.currentTarget&&e.modalToggle()},e}return Object(g.a)(a,[{key:"getSnapshotBeforeUpdate",value:function(e,t){if(t.images.length<this.state.images.length){var a=document.querySelector(".App");return a.scrollHeight-a.scrollTop}return null}},{key:"componentDidUpdate",value:function(e,t,a){t.searchQuery!==this.state.searchQuery&&this.findImages(),null!==a&&window.scrollTo({top:a-105,behavior:"smooth"})}},{key:"render",value:function(){var e=Object(b.css)(n||(n=Object(s.a)(["\n            display: block;\n            margin: 0 auto;\n            border-color: red;\n        "]))),t=this.state,a=t.loading,r=t.images,o=t.activeImage,c=t.activeModal;t.searchQuery;return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(w,{onSubmit:this.submitHandler}),a&&0===r.length&&Object(I.jsx)(h.a,{css:e,size:20,color:"#3f51b5"}),Object(I.jsx)(T,{images:r,getImageIdx:this.activeImageHandler,children:a?Object(I.jsx)(h.a,{css:e,size:20,color:"#3f51b5"}):Object(I.jsx)(F,{onClick:this.getMoreImages})}),c&&Object(I.jsx)(U,{activeimage:o,onClick:this.modalCloseHandler,onKeydown:this.modalToggle})]})}}]),a}(r.Component);a(65),a(66);i.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(Q,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.af00c804.chunk.js.map